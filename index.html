<!DOCTYPE html>
<html>
<body>
	<head>
		<meta charset="utf-8">
		<title>Etch-a-sketch</title>
		<link rel="stylesheet" type="text/css" href="./styles/style.css">
	</head>
	<body>
		<button onclick="resetGrid()">Reset grid</button>
		<div class="grid-container">
		</div>
		<script>
			// Etch-a-sketch code
			const container = document.querySelector(".grid-container");
			const clientWidth = document.documentElement.clientWidth;
			const clientHeight = document.documentElement.clientHeight;
			const button = document.getElementsByTagName("button")[0];
			// Define height of container, otherwise the grid doesn't work
			// DOM defines width of container, don't worry about that
			container.style.height = (clientHeight - 55) + "px";
						
			createGrid(16)
			createListeners();
			
			
			function createListeners() {
				// Has to be run after createGrid for the whole thing to work
				let squares = document.querySelectorAll(".grid-member");
			
				squares.forEach((square) => {
					square.addEventListener('mouseover', () => {
						square.classList.add("hovered");
					});
				});
			}
			
			function createGrid(gridSize) {
				//Get percentages of the grid for width and height
				let rectHeightPercent = (1/gridSize) * 100;
				let rectWidthPercent = (1/gridSize) * 100;
				
				for(let i = 0; i < gridSize; i++) {
					for(let u = 0; u < gridSize; u++) {
						let div = document.createElement("div");
						div.setAttribute("class", "grid-member");
						div.style.height = rectHeightPercent+"%";
						div.style.width = rectWidthPercent+"%";
						
						container.appendChild(div);
					}
				}
			}
			
			function resetGrid() {
				// Ask for new grid size
				let newGridSize = Number(prompt("Input the new number of cells for the grid"));
				
				if(typeof newGridSize !== "number"){
					alert("That was not a number, using default size of 16 for grid");
					newGridSize = 16;
				}
				
				// Delete the previous Grid
				let oldGrid = document.querySelectorAll(".grid-member");
				oldGrid.forEach((square) => {
					square.remove();
				});
				
				createGrid(newGridSize);
				createListeners();
			}
			
		</script>
	</body>
</body>
</html>
